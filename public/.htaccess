<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Redirect /index.html to /
  RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html\ HTTP/
  RewriteRule ^index\.html$ / [R=301,L]

  # Redirect .html extension to clean URL
  RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /(.+)\.html\ HTTP/
  RewriteRule ^(.+)\.html$ /$1 [R=301,L]

  # If the requested filename is not a directory
  RewriteCond %{REQUEST_FILENAME} !-d
  # And if the requested filename is not a file
  RewriteCond %{REQUEST_FILENAME} !-f
  # And if the requested filename with .html exists
  RewriteCond %{REQUEST_FILENAME}.html -f
  # Then rewrite to the .html file
  RewriteRule ^(.*)$ $1.html [L]

</IfModule>

# Handle 404
ErrorDocument 404 /404.html
